<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EM-II: Mathematics Notes</title>
    <meta name="description" content="Comprehensive study materials for Semester II Engineering Mathematics">
    <meta name="keywords" content="Engineering Mathematics, Semester II, Notes, Study Materials, Nilashis">
    <meta name="author" content="Nilashis">
    <link rel="icon" href="/maths/icon.png" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #334155 50%, #1e293b 75%, #0f172a 100%);
            overflow: hidden;
        }

        .floating-shapes {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .floating-shape {
            position: absolute;
            opacity: 0.6;
            animation: float 20s infinite ease-in-out;
        }

        .floating-shape:nth-child(odd) {
            animation-direction: reverse;
        }

        .floating-shape:nth-child(1) {
            animation-delay: 0s;
        }

        .floating-shape:nth-child(2) {
            animation-delay: -5s;
        }

        .floating-shape:nth-child(3) {
            animation-delay: -10s;
        }

        .floating-shape:nth-child(4) {
            animation-delay: -15s;
        }

        .floating-shape:nth-child(5) {
            animation-delay: -3s;
        }

        .floating-shape:nth-child(6) {
            animation-delay: -8s;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px) translateX(0px) rotate(0deg);
            }

            33% {
                transform: translateY(-30px) translateX(30px) rotate(120deg);
            }

            66% {
                transform: translateY(20px) translateX(-20px) rotate(240deg);
            }
        }

        .particle-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #94a3b8;
            border-radius: 50%;
            animation: twinkle 3s infinite ease-in-out;
        }

        @keyframes twinkle {

            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.5);
            }
        }

        .glass-card {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
        }

        .pdf-card {
            transition: all 0.3s ease;
        }

        .pdf-card:hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .search-glow {
            box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
        }

        .icon-btn {
            position: relative;
            overflow: hidden;
        }

        .icon-btn-download {
            transition: all 0.3s ease;
        }

        .icon-btn-download:hover {
            transform: translateY(-1px) scale(1.1);
            filter: brightness(1.2);
        }

        .icon-btn-external {
            transition: all 0.3s ease;
        }

        .icon-btn-external:hover {
            transform: translateY(-1px) scale(1.1);
            filter: brightness(1.2);
        }

        .unit-content {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 8px;
        }

        .unit-content::-webkit-scrollbar {
            width: 6px;
        }

        .unit-content::-webkit-scrollbar-track {
            background: rgba(148, 163, 184, 0.1);
            border-radius: 3px;
        }

        .unit-content::-webkit-scrollbar-thumb {
            background: rgba(148, 163, 184, 0.3);
            border-radius: 3px;
        }

        .unit-content::-webkit-scrollbar-thumb:hover {
            background: rgba(148, 163, 184, 0.5);
        }

        .icon-btn-close {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .icon-btn-close:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);
            transform: translateY(-1px);
        }

        /* Toast Notification Styles */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            pointer-events: none;
        }

        .toast {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 16px 20px;
            margin-bottom: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: auto;
            min-width: 300px;
            max-width: 400px;
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast.hide {
            transform: translateX(400px);
            opacity: 0;
        }

        .toast-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }

        .toast-icon {
            color: #10b981;
            font-size: 20px;
        }

        .toast-text {
            flex: 1;
            color: #f1f5f9;
        }

        .toast-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 2px;
        }

        .toast-subtitle {
            font-size: 12px;
            color: #94a3b8;
            word-break: break-all;
        }

        .toast-close {
            background: none;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            padding: 4px;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .toast-close:hover {
            background: rgba(148, 163, 184, 0.1);
            color: #f1f5f9;
        }

        .toast-progress {
            position: absolute;
            bottom: 0px;
            left: 3px;
            height: 3px;
            background: linear-gradient(90deg, #10b981, #059669);
            border-radius: 0 0 12px 12px;
            transition: width 0.1s linear;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Prevent flash of unstyled content */
        body {
            opacity: 0;
            transition: opacity 0.3s ease-in;
        }

        body.loaded {
            opacity: 1;
        }

        /* Search icon animation styles */
        .search-icon {
            transition: all 0.3s ease;
        }

        .search-circle {
            transition: all 0.3s ease;
            transform-origin: center;
        }

        .search-handle {
            transition: all 0.3s ease;
            transform-origin: 15px 15px;
        }

        .close-icon {
            transition: all 0.3s ease;
            transform-origin: center;
            stroke-dasharray: 0;
        }

        .search-icon.searching .search-circle {
            transform: scale(0);
            opacity: 0;
        }

        .search-icon.searching .search-handle {
            opacity: 0;
        }

        .search-icon.searching .close-icon {
            stroke-opacity: 1;
        }

        /* Easter egg waving animation */
        .waving-emoji {
            display: inline-block;
            transform-origin: 70% 70%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .waving-emoji:hover {
            animation: wave-once 0.8s ease-in-out;
        }

        @keyframes wave-once {

            0%,
            100% {
                transform: rotate(0deg);
            }

            15%,
            35%,
            55%,
            75% {
                transform: rotate(-15deg);
            }

            25%,
            45%,
            65%,
            85% {
                transform: rotate(15deg);
            }
        }

        .easter-egg-container {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.9) 0%, rgba(51, 65, 85, 0.8) 100%);
            border: 1px solid rgba(250, 204, 21, 0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from {
                box-shadow: 0 0 20px rgba(250, 204, 21, 0.2);
            }

            to {
                box-shadow: 0 0 30px rgba(250, 204, 21, 0.4);
            }
        }
    </style>
</head>

<body class="min-h-screen text-slate-200 overflow-x-hidden">
    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- SVG Animated Background -->
    <div class="animated-bg">
        <svg class="floating-shapes" viewBox="0 0 100 100" preserveAspectRatio="none">
            <!-- Floating geometric shapes -->
            <circle class="floating-shape" cx="10" cy="20" r="1" fill="rgba(148, 163, 184, 0.3)" />
            <circle class="floating-shape" cx="80" cy="40" r="0.8" fill="rgba(96, 165, 250, 0.2)" />
            <circle class="floating-shape" cx="30" cy="70" r="1.2" fill="rgba(167, 139, 250, 0.25)" />
            <circle class="floating-shape" cx="90" cy="15" r="0.6" fill="rgba(34, 197, 94, 0.2)" />
            <circle class="floating-shape" cx="50" cy="85" r="0.9" fill="rgba(251, 191, 36, 0.2)" />
            <circle class="floating-shape" cx="20" cy="50" r="0.7" fill="rgba(239, 68, 68, 0.2)" />
        </svg>

        <!-- Twinkling particles -->
        <div class="particle-container">
            <div class="particle" style="left: 15%; top: 25%; animation-delay: 0s;"></div>
            <div class="particle" style="left: 45%; top: 15%; animation-delay: 0.5s;"></div>
            <div class="particle" style="left: 75%; top: 65%; animation-delay: 1s;"></div>
            <div class="particle" style="left: 25%; top: 80%; animation-delay: 1.5s;"></div>
            <div class="particle" style="left: 85%; top: 35%; animation-delay: 2s;"></div>
            <div class="particle" style="left: 35%; top: 45%; animation-delay: 2.5s;"></div>
            <div class="particle" style="left: 65%; top: 75%; animation-delay: 3s;"></div>
            <div class="particle" style="left: 55%; top: 25%; animation-delay: 3.5s;"></div>
            <div class="particle" style="left: 95%; top: 85%; animation-delay: 4s;"></div>
            <div class="particle" style="left: 5%; top: 55%; animation-delay: 4.5s;"></div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="relative z-10">
        <!-- Header -->
        <header class="text-center py-12 px-4">
            <h1
                class="text-5xl md:text-7xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent mb-4 fade-in">
                Mathematics Notes
            </h1>
            <p class="text-base md:text-xl text-slate-300 fade-in font-serif" style="animation-delay: 0.2s;">
                Comprehensive study materials for Semester II Engineering Mathematics
            </p>
        </header>

        <!-- Search Bar -->
        <div class="max-w-2xl mx-auto px-4 mb-12 fade-in" style="animation-delay: 0.4s;">
            <div class="relative">
                <input type="text" id="searchInput" placeholder="Search for topics, units, or PDFs..."
                    class="w-full px-6 py-4 bg-slate-800/80 border border-slate-600 rounded-full text-white placeholder-slate-400 focus:outline-none focus:border-blue-400 search-glow transition-all duration-300">
                <div class="absolute right-6 top-1/2 transform -translate-y-1/2 w-5 h-5 cursor-pointer"
                    id="searchIconContainer">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                        class="w-full h-full text-slate-400 search-icon">
                        <path class="search-circle" fill="none" stroke="currentColor" stroke-width="2"
                            d="M10,17 a7,7 0 1,1 0,-14 a7,7 0 1,1 0,14" />
                        <path class="search-handle" fill="none" stroke="currentColor" stroke-width="2"
                            d="M15,15 L21,21" />
                        <path class="close-icon" fill="none" stroke="currentColor" stroke-width="2" d="M6,6 L18,18"
                            stroke-opacity="0" />
                        <path class="close-icon" fill="none" stroke="currentColor" stroke-width="2" d="M6,18 L18,6"
                            stroke-opacity="0" />
                    </svg>
                </div>
            </div>
            <div id="searchResults" class="mt-4 hidden"></div>
        </div>

        <!-- Units Grid -->
        <div class="max-w-7xl mx-auto px-4 pb-20">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Sequence and Series -->
                <div class="glass-card rounded-2xl p-8 fade-in" style="animation-delay: 0.6s;">
                    <div class="flex items-center mb-6">
                        <i class="fas fa-infinity text-3xl text-blue-400 mr-4"></i>
                        <h2 class="text-3xl font-bold text-white">Sequence and Series</h2>
                    </div>
                    <div class="unit-content space-y-4">
                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-calculator text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Arithmetic Progressions</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-chart-line text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Geometric Progressions</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-infinity text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Infinite Series</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Additional topics for demonstration -->
                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-square-root-alt text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Convergence Tests</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item pdf-card glass-card rounded-lg p-4" data-pdf="series/Fourier Series.pdf"
                            data-title="Fourier Series" data-unit="Sequence and Series">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-wave-square text-blue-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Fourier Series</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 download-pdf-btn icon-btn-download">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 hidden md:block open-new-tab-btn icon-btn-external">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-superscript text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Power Series</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Complex Numbers -->
                <div class="glass-card rounded-2xl p-8 fade-in" style="animation-delay: 0.8s;">
                    <div class="flex items-center mb-6">
                        <i class="fas fa-compass text-3xl text-purple-400 mr-4"></i>
                        <h2 class="text-3xl font-bold text-white">Complex Numbers</h2>
                    </div>
                    <div class="unit-content space-y-4">
                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-project-diagram text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Complex Plane</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-compass text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Polar Form</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-sitemap text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Complex Functions</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Additional topics -->
                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-sync text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Complex Conjugates</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-square-root-alt text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Roots of Unity</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-chart-area text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Cauchy-Riemann Equations</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item pdf-card glass-card rounded-lg p-4"
                            data-pdf="complex/Complex Integration.pdf" data-title="Complex Integration"
                            data-unit="Complex Numbers">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-calculator text-purple-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Complex Integration</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 download-pdf-btn icon-btn-download">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 hidden md:block open-new-tab-btn icon-btn-external">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ordinary Differential Equations -->
                <div class="glass-card rounded-2xl p-8 fade-in" style="animation-delay: 1s;">
                    <div class="flex items-center mb-6">
                        <i class="fas fa-wave-square text-3xl text-green-400 mr-4"></i>
                        <h2 class="text-3xl font-bold text-white">Ordinary Differential Equations</h2>
                    </div>
                    <div class="unit-content space-y-4">
                        <div class="pdf-item pdf-card glass-card rounded-lg p-4" data-pdf="ode/Formulation of ODE.pdf"
                            data-title="Formulation of ODE" data-unit="Ordinary Differential Equations">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-file-alt text-green-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Formulation of ODE</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 download-pdf-btn icon-btn-download">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 hidden md:block open-new-tab-btn icon-btn-external">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item pdf-card glass-card rounded-lg p-4"
                            data-pdf="ode/First Order Homogeneous ODE.pdf" data-title="First Order Homogeneous ODE"
                            data-unit="Ordinary Differential Equations">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-equals text-green-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">First Order Homogeneous ODE</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 download-pdf-btn icon-btn-download">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 hidden md:block open-new-tab-btn icon-btn-external">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item pdf-card glass-card rounded-lg p-4"
                            data-pdf="ode/First Order Non Homogeneous ODE.pdf"
                            data-title="First Order Non Homogeneous ODE" data-unit="Ordinary Differential Equations">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-not-equal text-green-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">First Order Non Homogeneous ODE
                                        </h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 download-pdf-btn icon-btn-download">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 hidden md:block open-new-tab-btn icon-btn-external">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item pdf-card glass-card rounded-lg p-4" data-pdf="ode/Exact ODE.pdf"
                            data-title="Exact ODE" data-unit="Ordinary Differential Equations">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-check-circle text-green-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Exact ODE</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 download-pdf-btn icon-btn-download">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 hidden md:block open-new-tab-btn icon-btn-external">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item pdf-card glass-card rounded-lg p-4" data-pdf="ode/Inexact ODE.pdf"
                            data-title="Inexact ODE" data-unit="Ordinary Differential Equations">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-times-circle text-green-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Inexact ODE</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 download-pdf-btn icon-btn-download">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 hidden md:block open-new-tab-btn icon-btn-external">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item pdf-card glass-card rounded-lg p-4"
                            data-pdf="ode/First Order Linear ODE.pdf" data-title="First Order Linear ODE"
                            data-unit="Ordinary Differential Equations">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-sort-numeric-down text-green-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">First Order Linear ODE</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 download-pdf-btn icon-btn-download">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 hidden md:block open-new-tab-btn icon-btn-external">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item pdf-card glass-card rounded-lg p-4" data-pdf="ode/Bernoulli's Equation.pdf"
                            data-title="Bernoulli's Equation" data-unit="Ordinary Differential Equations">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-superscript text-green-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Bernoulli's Equation</h3>
                                        <span class="text-xs text-slate-400 italic">Non Linear ODE</span>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 download-pdf-btn icon-btn-download">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 hidden md:block open-new-tab-btn icon-btn-external">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item pdf-card glass-card rounded-lg p-4"
                            data-pdf="ode/Second Order Liner ODE.pdf" data-title="Second Order Linear ODE"
                            data-unit="Ordinary Differential Equations">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-layer-group text-green-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Second Order Linear ODE</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 download-pdf-btn icon-btn-download">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 hidden md:block open-new-tab-btn icon-btn-external">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Vector Calculus -->
                <div class="glass-card rounded-2xl p-8 fade-in" style="animation-delay: 1.2s;">
                    <div class="flex items-center mb-6">
                        <i class="fas fa-vector-square text-3xl text-red-400 mr-4"></i>
                        <h2 class="text-3xl font-bold text-white">Vector Calculus</h2>
                    </div>
                    <div class="unit-content space-y-4">
                        <div class="pdf-item pdf-card glass-card rounded-lg p-4"
                            data-pdf="vector/Introduction to Vector Calculus.pdf"
                            data-title="Introduction to Vector Calculus" data-unit="Vector Calculus">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-arrows-alt text-red-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Introduction to Vector Calculus
                                        </h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 download-pdf-btn icon-btn-download">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button
                                        class="p-3 rounded-lg transition-all duration-300 hidden md:block open-new-tab-btn icon-btn-external">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-route text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Line Integrals</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-draw-polygon text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Green's Theorem</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Additional topics -->
                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-cube text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Surface Integrals</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-expand-arrows-alt text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Divergence Theorem</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-sync-alt text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Stokes' Theorem</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-item glass-card rounded-lg p-4 opacity-60">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-tornado text-slate-400 mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">Curl and Divergence</h3>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="p-2 text-slate-500 cursor-not-allowed">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center py-8 border-t border-slate-700 bg-slate-900/50">
        <p class="text-slate-400">
            Made with <span class="text-red-400"></span> by Nilashis
        </p>
    </footer>

    <script>
        // Unit color information
        const unitColors = {
            "Sequence and Series": {
                primaryColor: "text-blue-400",
                primaryColorClass: "blue-400",
                complementaryColor: "text-pink-400",
                complementaryColorClass: "pink-400",
                unitIcon: "fas fa-infinity"
            },
            "Complex Numbers": {
                primaryColor: "text-violet-400",
                primaryColorClass: "violet-400",
                complementaryColor: "text-lime-300",
                complementaryColorClass: "lime-300",
                unitIcon: "fas fa-compass"
            },
            "Ordinary Differential Equations": {
                primaryColor: "text-green-400",
                primaryColorClass: "green-400",
                complementaryColor: "text-purple-400",
                complementaryColorClass: "purple-400",
                unitIcon: "fas fa-wave-square"
            },
            "Vector Calculus": {
                primaryColor: "text-red-400",
                primaryColorClass: "red-400",
                complementaryColor: "text-yellow-400",
                complementaryColorClass: "yellow-400",
                unitIcon: "fas fa-vector-square"
            }
        };

        // PDF Data
        const pdfData = [
            // Sequence and Series
            {
                title: "Arithmetic Progressions",
                unit: "Sequence and Series",
                file: null,
                available: false,
                icon: "fas fa-calculator"
            },
            {
                title: "Geometric Progressions",
                unit: "Sequence and Series",
                file: null,
                available: false,
                icon: "fas fa-chart-line"
            },
            {
                title: "Infinite Series",
                unit: "Sequence and Series",
                file: null,
                available: false,
                icon: "fas fa-infinity"
            },
            {
                title: "Convergence Tests",
                unit: "Sequence and Series",
                file: null,
                available: false,
                icon: "fas fa-square-root-alt"
            },
            {
                title: "Fourier Series",
                unit: "Sequence and Series",
                file: "series/Fourier Series.pdf",
                available: true,
                icon: "fas fa-wave-square"
            },
            {
                title: "Power Series",
                unit: "Sequence and Series",
                file: null,
                available: false,
                icon: "fas fa-superscript"
            },
            // Complex Numbers
            {
                title: "Complex Plane",
                unit: "Complex Numbers",
                file: null,
                available: false,
                icon: "fas fa-project-diagram"
            },
            {
                title: "Polar Form",
                unit: "Complex Numbers",
                file: null,
                available: false,
                icon: "fas fa-compass"
            },
            {
                title: "Complex Functions",
                unit: "Complex Numbers",
                file: null,
                available: false,
                icon: "fas fa-sitemap"
            },
            {
                title: "Complex Conjugates",
                unit: "Complex Numbers",
                file: null,
                available: false,
                icon: "fas fa-sync"
            },
            {
                title: "Roots of Unity",
                unit: "Complex Numbers",
                file: null,
                available: false,
                icon: "fas fa-square-root-alt"
            },
            {
                title: "Cauchy-Riemann Equations",
                unit: "Complex Numbers",
                file: null,
                available: false,
                icon: "fas fa-chart-area"
            },
            {
                title: "Complex Integration",
                unit: "Complex Numbers",
                file: "complex/Complex Integration.pdf",
                available: true,
                icon: "fas fa-calculator"
            },
            // Ordinary Differential Equations
            {
                title: "Formulation of ODE",
                unit: "Ordinary Differential Equations",
                file: "ode/Formulation of ODE.pdf",
                available: true,
                icon: "fas fa-file-alt"
            },
            {
                title: "First Order Linear ODE",
                unit: "Ordinary Differential Equations",
                file: "ode/First Order Linear ODE.pdf",
                available: true,
                icon: "fas fa-sort-numeric-down"
            },
            {
                title: "First Order Homogeneous ODE",
                unit: "Ordinary Differential Equations",
                file: "ode/First Order Homogeneous ODE.pdf",
                available: true,
                icon: "fas fa-equals"
            },
            {
                title: "First Order Non Homogeneous ODE",
                unit: "Ordinary Differential Equations",
                file: "ode/First Order Non Homogeneous ODE.pdf",
                available: true,
                icon: "fas fa-not-equal"
            },
            {
                title: "Second Order Linear ODE",
                unit: "Ordinary Differential Equations",
                file: "ode/Second Order Liner ODE.pdf",
                available: true,
                icon: "fas fa-layer-group"
            },
            {
                title: "Bernoulli's Equation",
                unit: "Ordinary Differential Equations",
                file: "ode/Bernoulli's Equation.pdf",
                available: true,
                icon: "fas fa-superscript"
            },
            {
                title: "Exact ODE",
                unit: "Ordinary Differential Equations",
                file: "ode/Exact ODE.pdf",
                available: true,
                icon: "fas fa-check-circle"
            },
            {
                title: "Inexact ODE",
                unit: "Ordinary Differential Equations",
                file: "ode/Inexact ODE.pdf",
                available: true,
                icon: "fas fa-times-circle"
            },
            // Vector Calculus
            {
                title: "Introduction to Vector Calculus",
                unit: "Vector Calculus",
                file: "vector/Introduction to Vector Calculus.pdf",
                available: true,
                icon: "fas fa-arrows-alt"
            },
            {
                title: "Line Integrals",
                unit: "Vector Calculus",
                file: null,
                available: false,
                icon: "fas fa-route"
            },
            {
                title: "Green's Theorem",
                unit: "Vector Calculus",
                file: null,
                available: false,
                icon: "fas fa-draw-polygon"
            },
            {
                title: "Surface Integrals",
                unit: "Vector Calculus",
                file: null,
                available: false,
                icon: "fas fa-cube"
            },
            {
                title: "Divergence Theorem",
                unit: "Vector Calculus",
                file: null,
                available: false,
                icon: "fas fa-expand-arrows-alt"
            },
            {
                title: "Stokes' Theorem",
                unit: "Vector Calculus",
                file: null,
                available: false,
                icon: "fas fa-sync-alt"
            },
            {
                title: "Curl and Divergence",
                unit: "Vector Calculus",
                file: null,
                available: false,
                icon: "fas fa-tornado"
            }
        ];

        // Search Functionality
        class SearchManager {
            constructor() {
                this.searchInput = document.getElementById('searchInput');
                this.searchResults = document.getElementById('searchResults');
                this.searchIconContainer = document.getElementById('searchIconContainer');
                this.searchIcon = this.searchIconContainer.querySelector('.search-icon');

                this.bindEvents();
            }

            bindEvents() {
                this.searchInput.addEventListener('input', (e) => {
                    const query = e.target.value.toLowerCase().trim();

                    // Toggle icon animation state
                    if (query.length > 0) {
                        this.searchIcon.classList.add('searching');
                    } else {
                        this.searchIcon.classList.remove('searching');
                    }

                    if (query.length === 0) {
                        this.hideResults();
                        return;
                    }

                    // Check for easter egg
                    if (query === 'nilashis') {
                        this.showEasterEgg();
                        return;
                    }

                    this.showResults(this.search(query));
                });

                // Add click handler for the search icon container
                this.searchIconContainer.addEventListener('click', () => {
                    if (this.searchInput.value.trim().length > 0) {
                        // If there's text, clear it
                        this.searchInput.value = '';
                        this.hideResults();
                        this.searchIcon.classList.remove('searching');
                        this.searchInput.focus();
                    } else {
                        // If empty, focus the search input
                        this.searchInput.focus();
                    }
                });

                // Single document click handler that handles BOTH search hiding AND PDF button clicks
                document.addEventListener('click', (e) => {
                    // Handle PDF button clicks first
                    if (e.target.closest('.download-pdf-btn')) {
                        console.log('Main download button clicked');
                        e.stopPropagation();
                        const pdfItem = e.target.closest('.pdf-item');
                        const pdfFile = pdfItem.dataset.pdf;
                        downloadPDFDirect(pdfFile);
                        return;
                    }

                    if (e.target.closest('.open-new-tab-btn')) {
                        console.log('Main external button clicked');
                        e.stopPropagation();
                        const pdfItem = e.target.closest('.pdf-item');
                        const pdfFile = pdfItem.dataset.pdf;
                        openInNewTabDirect(pdfFile);
                        return;
                    }

                    // Check if click is on search result PDF buttons
                    if (e.target.closest('.icon-btn-download') || e.target.closest('.icon-btn-external')) {
                        console.log('Search result PDF button clicked, not hiding search results');
                        return; // Don't hide results for search result PDF button clicks
                    }
                });
            }

            search(query) {
                // Fuzzy search implementation
                if (query.length === 0) return [];

                const calculateSimilarity = (str, term) => {
                    // Simple fuzzy matching - check if all characters appear in order
                    str = str.toLowerCase();
                    term = term.toLowerCase();

                    // Check for exact substring match first (highest priority)
                    if (str.includes(term)) {
                        return 1.0;
                    }

                    // Levenshtein distance calculation (simplified)
                    const levenshteinDistance = (s1, s2) => {
                        if (s1.length === 0) return s2.length;
                        if (s2.length === 0) return s1.length;

                        const matrix = [];

                        // Initialize matrix
                        for (let i = 0; i <= s1.length; i++) {
                            matrix[i] = [i];
                        }

                        for (let j = 0; j <= s2.length; j++) {
                            matrix[0][j] = j;
                        }

                        // Fill matrix
                        for (let i = 1; i <= s1.length; i++) {
                            for (let j = 1; j <= s2.length; j++) {
                                const cost = s1[i - 1] === s2[j - 1] ? 0 : 1;
                                matrix[i][j] = Math.min(
                                    matrix[i - 1][j] + 1,      // deletion
                                    matrix[i][j - 1] + 1,      // insertion
                                    matrix[i - 1][j - 1] + cost  // substitution
                                );
                            }
                        }

                        return matrix[s1.length][s2.length];
                    };

                    // Calculate similarity score (0-1)
                    const maxLength = Math.max(str.length, term.length);
                    if (maxLength === 0) return 1; // Both strings are empty

                    const distance = levenshteinDistance(str, term);
                    // Convert distance to similarity score (higher is better)
                    return 1 - (distance / maxLength);
                };

                // Calculate similarity for title and unit, take the better match
                const results = pdfData.map(item => {
                    const titleSimilarity = calculateSimilarity(item.title, query);
                    const unitSimilarity = calculateSimilarity(item.unit, query);
                    const bestSimilarity = Math.max(titleSimilarity, unitSimilarity);

                    return {
                        item,
                        similarity: bestSimilarity
                    };
                });

                // Sort by similarity (highest first) and filter out low-scoring matches
                const threshold = 0.6; // Adjust this threshold to control fuzziness.
                return results
                    .filter(result => result.similarity > threshold)
                    .sort((a, b) => b.similarity - a.similarity)
                    .map(result => result.item);
            }

            showResults(results) {
                if (results.length === 0) {
                    this.searchResults.innerHTML = `
                <div class="glass-card rounded-lg p-4 mt-2">
                    <p class="text-slate-400">No results found</p>
                </div>
            `;
                } else {
                    this.searchResults.innerHTML = results.map(item => {
                        const unitColorInfo = unitColors[item.unit] || {
                            primaryColor: "text-slate-400",
                            complementaryColor: "text-purple-400"
                        };

                        return `
                <div class="glass-card rounded-lg p-4 mt-2 hover:bg-slate-700/50 transition-colors search-result-item ${!item.available ? 'opacity-60' : ''}" 
                     data-unit="${item.unit}" data-title="${item.title}" data-available="${item.available}" data-file="${item.file || ''}">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <i class="${item.icon} ${item.available ? unitColorInfo.primaryColor : 'text-slate-400'} mr-3"></i>
                            <div>
                                <h3 class="text-white font-semibold">${item.title}</h3>
                                <p class="text-slate-400 text-sm">${item.unit}</p>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            ${item.available ? `
                                <button class="icon-btn-download p-2 rounded-lg transition-all duration-300">
                                    <i class="fas fa-download ${unitColorInfo.primaryColor}"></i>
                                </button>
                                <button class="icon-btn-external p-2 rounded-lg transition-all duration-300 hidden sm:block">
                                    <i class="fas fa-external-link-alt ${unitColorInfo.complementaryColor}"></i>
                                </button>
                            ` : `
                                <button class="p-2 text-slate-500 cursor-not-allowed">
                                    <i class="fas fa-download"></i>
                                </button>
                                <button class="p-2 text-slate-500 cursor-not-allowed hidden sm:block">
                                    <i class="fas fa-external-link-alt"></i>
                                </button>
                            `}
                        </div>
                    </div>
                </div>
            `}).join('');
                }

                this.searchResults.classList.remove('hidden');

                // Add click handlers to search results
                this.searchResults.querySelectorAll('.search-result-item').forEach(item => {
                    const isAvailable = item.dataset.available === 'true';

                    if (isAvailable) {
                        // Add specific button handlers
                        const downloadBtn = item.querySelector('.icon-btn-download');
                        const externalBtn = item.querySelector('.icon-btn-external');

                        if (downloadBtn) {
                            downloadBtn.addEventListener('click', (e) => {
                                console.log('Search result download button clicked');
                                e.stopPropagation();
                                const file = item.dataset.file;
                                if (file) downloadPDFDirect(file);
                            });
                        }

                        if (externalBtn) {
                            externalBtn.addEventListener('click', (e) => {
                                console.log('Search result external button clicked');
                                e.stopPropagation();
                                const file = item.dataset.file;
                                if (file) openInNewTabDirect(file);
                            });
                        }
                    }
                });
            }

            showEasterEgg() {
                this.searchResults.innerHTML = `
                    <div class="glass-card rounded-lg p-6 mt-2 easter-egg-container">
                        <div class="text-center">
                            <div class="waving-emoji text-6xl mb-4"></div>
                            <h3 class="text-white font-bold text-xl mb-2">Oh hey, that's me the developer and the notes provider!</h3>
                            <p class="text-slate-300 mb-4">Here's some sample questions for you:</p>
                            
                            <div class="glass-card rounded-lg p-4 mt-4 hover:bg-slate-700/50 transition-colors search-result-item" 
                                 data-unit="Sample" data-title="Sample Questions" data-available="true" data-file="Sample Questions.pdf">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <i class="fas fa-file-pdf text-red-400 mr-3"></i>
                                        <div>
                                            <h3 class="text-white font-semibold">Sample Questions</h3>
                                        </div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button class="icon-btn-download p-2 rounded-lg transition-all duration-300">
                                            <i class="fas fa-download text-red-400"></i>
                                        </button>
                                        <button class="icon-btn-external p-2 rounded-lg transition-all duration-300 hidden sm:block">
                                            <i class="fas fa-external-link-alt text-pink-400"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                this.searchResults.classList.remove('hidden');

                // Add click handlers to the sample questions item
                const sampleItem = this.searchResults.querySelector('.search-result-item');
                if (sampleItem) {
                    const downloadBtn = sampleItem.querySelector('.icon-btn-download');
                    const externalBtn = sampleItem.querySelector('.icon-btn-external');

                    if (downloadBtn) {
                        downloadBtn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            downloadPDFDirect('Sample Questions.pdf');
                        });
                    }

                    if (externalBtn) {
                        externalBtn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            openInNewTabDirect('Sample Questions.pdf');
                        });
                    }
                }
            }

            hideResults() {
                this.searchResults.classList.add('hidden');
            }
        }

        // Debug utility to verify PDF paths
        console.log('Document loaded on: ', window.location.href);
        document.querySelectorAll('.pdf-item[data-pdf]').forEach(item => {
            const pdfPath = item.dataset.pdf;
            const absolutePath = `/maths/${pdfPath}`;
            console.log('PDF path:', pdfPath, 'Absolute URL:', absolutePath);

            // Test if the PDF exists with a HEAD request
            fetch(absolutePath, { method: 'HEAD' })
                .then(response => {
                    console.log('PDF access status:', pdfPath, response.status, response.ok);
                    if (!response.ok) {
                        console.error('PDF not accessible:', absolutePath);
                    }
                })
                .catch(err => console.error('Error checking PDF:', pdfPath, err));
        });

        // Toast Notification Manager
        class ToastManager {
            constructor() {
                this.container = document.getElementById('toastContainer');
                this.toasts = new Map();
                this.toastCounter = 0;
            }

            showDownloadToast(filename) {
                const toastId = `toast-${++this.toastCounter}`;

                // Check if we're on a desktop device (screen width > 768px)
                const isDesktop = window.innerWidth > 768;
                const displayName = filename ? filename.split('/').pop() : 'File';

                const toast = document.createElement('div');
                toast.className = 'toast';
                toast.id = toastId;

                toast.innerHTML = `
                    <div class="toast-content">
                        <i class="fas fa-check-circle toast-icon"></i>
                        <div class="toast-text">
                            <div class="toast-title">Download completed</div>
                            <div class="toast-subtitle">${displayName}</div>
                        </div>
                        <button class="toast-close" onclick="toastManager.hideToast('${toastId}')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="toast-progress" style="width: 100%"></div>
                `;

                this.container.appendChild(toast);

                // Show the toast with animation
                setTimeout(() => {
                    toast.classList.add('show');
                }, 10);

                // Animate progress bar
                const progressBar = toast.querySelector('.toast-progress');
                let width = 100;
                const interval = setInterval(() => {
                    width -= 1;
                    progressBar.style.width = width + '%';
                    if (width <= 0) {
                        clearInterval(interval);
                        this.hideToast(toastId);
                    }
                }, 100); // 10 seconds total (100 * 100ms)

                // Store toast info
                this.toasts.set(toastId, { element: toast, interval });

                return toastId;
            }

            hideToast(toastId) {
                const toastInfo = this.toasts.get(toastId);
                if (!toastInfo) return;

                const { element, interval } = toastInfo;

                // Clear the progress interval
                if (interval) {
                    clearInterval(interval);
                }

                // Hide with animation
                element.classList.remove('show');
                element.classList.add('hide');

                // Remove from DOM after animation
                setTimeout(() => {
                    if (element.parentNode) {
                        element.parentNode.removeChild(element);
                    }
                    this.toasts.delete(toastId);
                }, 400);
            }

            clearAllToasts() {
                this.toasts.forEach((_, toastId) => {
                    this.hideToast(toastId);
                });
            }
        }

        // Initialize toast manager
        const toastManager = new ToastManager();

        // Utility functions for download and open in new tab
        function downloadPDFDirect(filename) {
            console.log('downloadPDFDirect called with:', filename);
            const link = document.createElement('a');
            // Always use absolute path from root
            const absolutePath = `/maths/${filename}`;
            link.href = absolutePath;
            link.download = filename.split('/').pop(); // Just use the filename portion
            link.style.display = 'none';
            link.style.position = 'absolute';
            link.style.top = '-9999px';

            document.body.appendChild(link);
            link.click();

            // Show download toast notification
            toastManager.showDownloadToast(filename);

            // Clean up after a short delay
            setTimeout(() => {
                if (link.parentNode) {
                    document.body.removeChild(link);
                }
            }, 100);

            console.log('Downloading PDF:', link.href); // Debug info
        }

        function openInNewTabDirect(filename) {
            // Always use absolute path from root
            const absolutePath = `/maths/${filename}`;
            console.log('Opening PDF in new tab:', absolutePath); // Debug info
            window.open(absolutePath, '_blank');
        }

        // Function to apply unit colors to all icons
        function applyUnitColorsToIcons() {
            // Apply colors to all topic icons
            document.querySelectorAll('.pdf-item').forEach(pdfItem => {
                // Skip if it's not available
                if (pdfItem.classList.contains('opacity-60')) return;

                const unitName = pdfItem.dataset.unit;
                if (!unitName) return;

                const unitColorInfo = unitColors[unitName];
                if (!unitColorInfo) return;

                // Set topic icon color to match unit color
                const topicIcon = pdfItem.querySelector('.flex.items-center i');
                if (topicIcon) {
                    topicIcon.classList.remove('text-slate-400');
                    topicIcon.classList.add(unitColorInfo.primaryColor);
                }

                // Set download icon color
                const downloadIcon = pdfItem.querySelector('.download-pdf-btn i');
                if (downloadIcon) {
                    downloadIcon.classList.add(unitColorInfo.primaryColor);
                }

                // Set external link icon color
                const externalIcon = pdfItem.querySelector('.open-new-tab-btn i');
                if (externalIcon) {
                    externalIcon.classList.add(unitColorInfo.complementaryColor);
                }
            });
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            try {
                // Prevent flash by showing body after DOM is ready
                document.body.classList.add('loaded');

                // Apply unit colors to all topic icons
                applyUnitColorsToIcons();

                // Initialize search functionality (now handles PDF clicks too)
                new SearchManager();

                // Add smooth scrolling for any anchor links
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const target = document.querySelector(this.getAttribute('href'));
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth'
                            });
                        }
                    });
                });

                // Improved intersection observer to reduce conflicts and flashing
                const observerOptions = {
                    threshold: 0.15,
                    rootMargin: '0px 0px -20px 0px'
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                            // Unobserve after animation to prevent re-triggering
                            observer.unobserve(entry.target);
                        }
                    });
                }, observerOptions);

                // Observe fade-in elements with staggered delay to prevent flash
                const fadeElements = document.querySelectorAll('.fade-in');
                fadeElements.forEach((el, index) => {
                    setTimeout(() => {
                        observer.observe(el);
                    }, index * 50 + 200); // Stagger animations
                });

                // Apply unit colors to icons initially
                applyUnitColorsToIcons();
            } catch (error) {
                console.error('Error during initialization:', error);
                // Make sure the page is visible even if there's an error
                document.body.classList.add('loaded');
            }
        });
    </script>
</body>

</html>